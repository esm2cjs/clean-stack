{
  "version": 3,
  "sources": ["../esm/index.js"],
  "sourcesContent": ["import os from 'os';\nimport escapeStringRegexp from '@esm2cjs/escape-string-regexp';\n\nconst extractPathRegex = /\\s+at.*[(\\s](.*)\\)?/;\nconst pathRegex = /^(?:(?:(?:node|node:[\\w/]+|(?:(?:node:)?internal\\/[\\w/]*|.*node_modules\\/(?:babel-polyfill|pirates)\\/.*)?\\w+)(?:\\.js)?:\\d+:\\d+)|native)/;\nconst homeDir = typeof os.homedir === 'undefined' ? '' : os.homedir().replace(/\\\\/g, '/');\n\nexport default function cleanStack(stack, {pretty = false, basePath} = {}) {\n\tconst basePathRegex = basePath && new RegExp(`(at | \\\\()${escapeStringRegexp(basePath.replace(/\\\\/g, '/'))}`, 'g');\n\n\tif (typeof stack !== 'string') {\n\t\treturn undefined;\n\t}\n\n\treturn stack.replace(/\\\\/g, '/')\n\t\t.split('\\n')\n\t\t.filter(line => {\n\t\t\tconst pathMatches = line.match(extractPathRegex);\n\t\t\tif (pathMatches === null || !pathMatches[1]) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst match = pathMatches[1];\n\n\t\t\t// Electron\n\t\t\tif (\n\t\t\t\tmatch.includes('.app/Contents/Resources/electron.asar') ||\n\t\t\t\tmatch.includes('.app/Contents/Resources/default_app.asar') ||\n\t\t\t\tmatch.includes('node_modules/electron/dist/resources/electron.asar') ||\n\t\t\t\tmatch.includes('node_modules/electron/dist/resources/default_app.asar')\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !pathRegex.test(match);\n\t\t})\n\t\t.filter(line => line.trim() !== '')\n\t\t.map(line => {\n\t\t\tif (basePathRegex) {\n\t\t\t\tline = line.replace(basePathRegex, '$1');\n\t\t\t}\n\n\t\t\tif (pretty) {\n\t\t\t\tline = line.replace(extractPathRegex, (m, p1) => m.replace(p1, p1.replace(homeDir, '~')));\n\t\t\t}\n\n\t\t\treturn line;\n\t\t})\n\t\t.join('\\n');\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAe;AACf,kCAA+B;AAE/B,MAAM,mBAAmB;AACzB,MAAM,YAAY;AAClB,MAAM,UAAU,OAAO,UAAAA,QAAG,YAAY,cAAc,KAAK,UAAAA,QAAG,QAAQ,EAAE,QAAQ,OAAO,GAAG;AAEzE,SAAR,WAA4B,OAAO,EAAC,SAAS,OAAO,SAAQ,IAAI,CAAC,GAAG;AAC1E,QAAM,gBAAgB,YAAY,IAAI,OAAO,iBAAa,4BAAAC,SAAmB,SAAS,QAAQ,OAAO,GAAG,CAAC,KAAK,GAAG;AAEjH,MAAI,OAAO,UAAU,UAAU;AAC9B,WAAO;AAAA,EACR;AAEA,SAAO,MAAM,QAAQ,OAAO,GAAG,EAC7B,MAAM,IAAI,EACV,OAAO,UAAQ;AACf,UAAM,cAAc,KAAK,MAAM,gBAAgB;AAC/C,QAAI,gBAAgB,QAAQ,CAAC,YAAY,IAAI;AAC5C,aAAO;AAAA,IACR;AAEA,UAAM,QAAQ,YAAY;AAG1B,QACC,MAAM,SAAS,uCAAuC,KACtD,MAAM,SAAS,0CAA0C,KACzD,MAAM,SAAS,oDAAoD,KACnE,MAAM,SAAS,uDAAuD,GACrE;AACD,aAAO;AAAA,IACR;AAEA,WAAO,CAAC,UAAU,KAAK,KAAK;AAAA,EAC7B,CAAC,EACA,OAAO,UAAQ,KAAK,KAAK,MAAM,EAAE,EACjC,IAAI,UAAQ;AACZ,QAAI,eAAe;AAClB,aAAO,KAAK,QAAQ,eAAe,IAAI;AAAA,IACxC;AAEA,QAAI,QAAQ;AACX,aAAO,KAAK,QAAQ,kBAAkB,CAAC,GAAG,OAAO,EAAE,QAAQ,IAAI,GAAG,QAAQ,SAAS,GAAG,CAAC,CAAC;AAAA,IACzF;AAEA,WAAO;AAAA,EACR,CAAC,EACA,KAAK,IAAI;AACZ;",
  "names": ["os", "escapeStringRegexp"]
}
